<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>LiloanUnited</title>

  <meta name="theme-color" content="#ff4500" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <link rel="manifest" href="manifest.json" />
  <!-- NOTE: If you will rename your logo file, change this path too. -->
  <link rel="icon" href="images/bfn.png" />
  <link rel="apple-touch-icon" href="images/bfn.png" />

  <link rel="stylesheet" href="css/style.css" />

  <style>
    /* ===============================
      THEME COLOR VARIABLES (FIX)
    ============================== */
    :root{
      --text-main:#111;
      --text-muted: rgba(0,0,0,.75);
    }
    html[data-theme="dark"]{
      --text-main:#fff;
      --text-muted: rgba(255,255,255,.85);
    }

    /* ===============================
      SIDEBAR TOGGLE
    ============================== */
    .sidebar-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      cursor:pointer;
      user-select:none;
      gap:10px;
    }
    .sidebar-links{
      overflow:hidden;
      max-height:500px;
      transition:max-height .3s ease;
    }
    .sidebar-links.closed{ max-height:0; }
    #sidebarArrow{ transition:transform .3s ease; }
    #sidebarArrow.rotated{ transform: rotate(-90deg); }

    /* ===============================
      FB-STYLE POST
    ============================== */
    .post{ position:relative; }
    .post h2{ margin-bottom:8px; }
    .post-body{ overflow:visible; max-height:none; }

    .fb p{ margin: 8px 0; line-height: 1.35; }
    .fb h3{ margin: 14px 0 6px; font-size: 1.05rem; }
    .fb .bullets{ margin:10px 0 0; padding-left:0; list-style:none; }
    .fb .bullets li{ margin:6px 0; }
    .fb .bullets li::before{ content:"‚Ä¢ "; opacity:.75; }

    /* ===============================
      POST IMAGES (clickable)
    ============================== */
    .img-placeholder{
      margin:12px 0;
      border-radius:14px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
    }
    .img-placeholder img{
      width:100%;
      height:auto;
      display:block;
      object-fit:cover;
      cursor: zoom-in;
      transition: transform .2s ease, filter .2s ease;
    }
    .img-placeholder img:hover{
      transform: scale(1.01);
      filter: brightness(1.03);
    }

    /* ===============================
      ‚úÖ FACEBOOK-LIKE IMAGE VIEWER (FULL CSS)
    ============================== */
    .img-viewer{
      position:fixed;
      inset:0;
      z-index:9999;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.86);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      padding: 18px;
    }
    .img-viewer.show{ display:flex; }

    .viewer-inner{
      position:relative;
      width:min(1100px, 100%);
      height:min(86vh, 860px);
      display:flex;
      align-items:center;
      justify-content:center;
      -webkit-user-select:none;
      user-select:none;
    }

    .viewer-img{
      max-width:100%;
      max-height:100%;
      border-radius:16px;
      box-shadow: 0 18px 70px rgba(0,0,0,.55);
      user-select:none;
      -webkit-user-drag:none;
      cursor: grab;
      touch-action:none;
      transform-origin:center center;
      will-change: transform;
      transition: transform .08s linear;
    }
    .viewer-img:active{ cursor: grabbing; }

    .viewer-topbar{
      position:absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      pointer-events:none;
    }

    .viewer-pill{
      pointer-events:auto;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.14);
      color:#fff;
      font-weight:800;
      font-size:.9rem;
      display:flex;
      align-items:center;
      gap:8px;
      max-width: 70%;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .viewer-actions{
      pointer-events:auto;
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .vbtn{
      border:none;
      cursor:pointer;
      padding: 10px 12px;
      border-radius: 999px;
      font-weight:900;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.14);
      color:#fff;
      transition: transform .12s ease, filter .12s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .vbtn:hover{ transform: translateY(-1px); filter: brightness(1.08); }
    .vbtn:active{ transform: translateY(0); }
    .vbtn.primary{
      background: rgba(255,69,0,.35);
      border-color: rgba(255,69,0,.45);
    }

    .viewer-nav{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:space-between;
      pointer-events:none;
    }
    .viewer-nav .navbtn{
      pointer-events:auto;
      width: 44px;
      height: 44px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.10);
      color:#fff;
      font-weight:900;
      cursor:pointer;
      display:grid;
      place-items:center;
      margin: 0 8px;
      transition: transform .12s ease, filter .12s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .viewer-nav .navbtn:hover{ transform: scale(1.04); filter: brightness(1.1); }

    .viewer-bottom{
      position:absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:center;
      pointer-events:none;
    }
    .hint{
      pointer-events:auto;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.14);
      color:#fff;
      font-size:.85rem;
      opacity:.9;
    }

    @media (max-width: 520px){
      .viewer-inner{ height: 82vh; }
      .viewer-pill{ max-width: 58%; }
      .viewer-actions .vbtn{ padding: 9px 10px; }
    }

    /* ===============================
      ‚úÖ HERO (with background FIX)
    ============================== */
    .hero{
      position:relative;
      width:100%;
      min-height:550px;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 40px 0;
      background: transparent;
    }

    .hero-pattern{
      position:absolute;
      inset:0;
      z-index:0;
      opacity:.05;
      pointer-events:none;
      background-image:url("images/abstract.png");
      background-size:300px;
      background-repeat:repeat;
    }
    .hero-banner{
      position:absolute;
      top:0;
      left:0;
      right:0;
      margin:0 auto;
      width:100%;
      max-width:1600px;
      height:550px;
      z-index:1;
      background-image:url("images/image.png");
      background-size:100% 100%;
      background-position:center top;
      background-repeat:no-repeat;
      pointer-events:none;
    }
    .hero-fade{
      position:absolute;
      inset:0;
      z-index:2;
      pointer-events:none;
      background: linear-gradient(to bottom, rgba(0,0,0,.18), rgba(0,0,0,0));
    }

    .hero-content{
      position:relative;
      z-index:3;
      width:100%;
      padding:0 16px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:18px;
    }

    .hero-head{
      text-align:center;
      max-width:900px;
      animation: heroIn .7s ease both;
    }

    .hero-head h1{
      margin:0;
      font-weight:900;
      text-transform:uppercase;
      color: var(--text-main);
      text-shadow:0 10px 30px rgba(0,0,0,.4);
      font-size: clamp(28px, 4.2vw, 52px);
    }

    .hero-head p{
      margin-top:10px;
      color: var(--text-muted);
      font-weight:600;
    }

    /* ===============================
      CTA BUTTONS
    ============================== */
    .hero-cta{
      width:100%;
      max-width:980px;
      display:flex;
      flex-wrap:wrap;
      gap:15px;
      justify-content:center;
      margin-bottom:15px;
    }

    .cta-btn{
      width:300px;
      height:50px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      border:none;
      border-radius:999px;
      cursor:pointer;
      color:#fff;
      font-weight:900;
      font-size:1.15rem;
      text-decoration:none;
      transition: transform .15s ease, filter .2s ease, box-shadow .2s ease;
    }

    .cta-btn:hover{
      transform: scale(1.05);
      filter: brightness(1.05);
    }

    .cta-btn svg{ width:24px; height:24px; }

    .cta-purple{
      background: linear-gradient(90deg, #ff2a00, #ff9a00);
      box-shadow: 0 0 30px rgba(255, 90, 0, 0.55);
    }
    .cta-purple:hover{
      box-shadow: 0 0 55px rgba(255, 140, 0, 0.85);
    }

    .cta-discord{
      background: linear-gradient(90deg, #5865F2, #4752C4);
      box-shadow: 0 0 30px rgba(88,101,242,0.40);
    }
    .cta-discord:hover{ box-shadow: 0 0 50px rgba(88,101,242,0.60); }

    @keyframes heroIn{
      from{ opacity:0; transform: translateY(-10px); }
      to{ opacity:1; transform: translateY(0); }
    }

    /* ===============================
      MUSIC WIDGET (kept)
    ============================== */
    .music-widget{
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 9998;
      width: min(360px, calc(100vw - 32px));
      background: rgba(20,20,26,.72);
      border: 1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 16px;
      box-shadow: 0 18px 55px rgba(0,0,0,.35);
      color: #fff;
      overflow:hidden;
      user-select:none;
    }

    /* =========================================
       ‚úÖ BFN POST MODES (ONLY affects article.post.fb)
       - header + hero unaffected
    ========================================= */
    article.post.fb{
      position: relative;
      overflow: hidden;
      transition: opacity .35s ease, transform .35s ease, max-height .45s ease, margin .35s ease, padding .35s ease;
    }

    /* Animated Hide/Show */
    article.post.fb.is-hidden{
      opacity: 0;
      transform: translateY(12px);
      max-height: 0;
      overflow: hidden;
      margin: 0 !important;
      padding: 0 !important;
      pointer-events: none;
    }

    /* Coming Soon Overlay */
    article.post.fb.coming-soon::before{
      content:"";
      position:absolute;
      inset:0;
      background: rgba(0,0,0,.62);
      backdrop-filter: blur(3px);
      -webkit-backdrop-filter: blur(3px);
      z-index: 20;
    }
    article.post.fb.coming-soon::after{
      content:"üöß Coming Soon";
      position:absolute;
      top: 16px;
      left: 16px;
      padding: 10px 14px;
      border-radius: 12px;
      background: rgba(255,69,0,.95);
      color: #fff;
      font-weight: 900;
      letter-spacing: .6px;
      text-transform: uppercase;
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
      z-index: 21;
    }
    article.post.fb.coming-soon{
      pointer-events: none; /* disables clicks ONLY inside this article */
    }

    /* Disable ONLY images */
    article.post.fb.disable-images .img-placeholder,
    article.post.fb.disable-images img.post-img{
      display: none !important;
    }

    /* Disable ONLY text (keeps title visible) */
    article.post.fb.disable-text h3,
    article.post.fb.disable-text p,
    article.post.fb.disable-text ul,
    article.post.fb.disable-text li{
      display: none !important;
    }
    article.post.fb.disable-text h2{
      display: block !important;
    }
  </style>
</head>

<body>

  <!-- ‚úÖ HEADER (NOT affected by article modes) -->
  <header>
    <div class="header-inner">
      <div class="logo" onclick="window.scrollTo({top:0, behavior:'smooth'})">
        <img src="images/LU1.png" alt="LiloanUnited Logo" />
      </div>

      <nav class="nav">
        <a href="index.html">Home</a>
        <a href="update.html">Update</a>
        <a href="event.html">Events</a>
        <a href="download.html">Downloads</a>
        <a href="staff.html">Staff</a>
      </nav>

      <button id="themeToggle" title="Toggle Theme" aria-label="Toggle Theme">‚òÄÔ∏è</button>
    </div>
  </header>

  <!-- ‚úÖ HERO SECTION (NOT affected by article modes) -->
  <section class="hero" aria-label="Hero">
    <div class="hero-pattern"></div>
    <div class="hero-banner"></div>
    <div class="hero-fade"></div>

    <div class="hero-content">
      <div class="hero-head">
        <h1>iDate Is Back. The Dance Floor Awaits.</h1>
        <p>
          The ultimate dance game returns ‚Äî classic beats, iconic style, and the community you love.
        </p>
      </div>

      <div class="hero-cta">
        <a class="cta-btn cta-purple" href="download.html">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M12 15V3"></path>
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <path d="m7 10 5 5 5-5"></path>
          </svg>
          Free to Play!
        </a>

        <a class="cta-btn cta-discord" href="https://discord.gg/snbNdkrcEr" target="_blank" rel="noopener">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.211.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"></path>
          </svg>
          Join Discord Server
        </a>
      </div>
    </div>
  </section>

  <!-- ‚úÖ IMAGE VIEWER MODAL -->
  <div class="img-viewer" id="imgViewer" aria-hidden="true">
    <div class="viewer-inner" role="dialog" aria-modal="true" aria-label="Image viewer">

      <div class="viewer-topbar">
        <div class="viewer-pill" id="viewerCaption">üì∑ Image</div>
        <div class="viewer-actions">
          <button class="vbtn" id="zoomOutBtn" title="Zoom out">‚ûñ</button>
          <button class="vbtn" id="zoomInBtn" title="Zoom in">‚ûï</button>
          <button class="vbtn" id="resetZoomBtn" title="Reset">‚Ü©Ô∏è</button>
          <button class="vbtn primary" id="closeViewerBtn" title="Close (Esc)">‚úñ</button>
        </div>
      </div>

      <div class="viewer-nav">
        <button class="navbtn" id="prevImgBtn" title="Previous (‚Üê)">‚ü®</button>
        <button class="navbtn" id="nextImgBtn" title="Next (‚Üí)">‚ü©</button>
      </div>

      <img class="viewer-img" id="viewerImg" src="" alt="Full view" />

      <div class="viewer-bottom">
        <span class="hint">Click outside to close</span>
        <span class="hint">Scroll / pinch to zoom</span>
        <span class="hint">‚Üê / ‚Üí to navigate</span>
      </div>
    </div>
  </div>

  <!-- ‚úÖ AUDIO -->
  <audio id="bgm" preload="auto"></audio>

  <!-- ‚úÖ MUSIC WIDGET -->
  <div class="music-widget" id="musicWidget">
    <div class="music-mini-bar">
      <span id="miniStatus">üéµ BGM</span>
      <button class="music-min-btn" id="expandBtn" title="Expand">‚¨ÜÔ∏è</button>
    </div>

    <div class="music-top">
      <div class="music-title" id="songName">üéµ LiloanUnited BGM</div>
      <div class="music-status" id="songStatus">Paused</div>
    </div>

    <div class="music-controls">
      <button class="m-btn" id="prevBtn" title="Previous">‚èÆÔ∏è</button>
      <button class="m-btn primary" id="playBtn" title="Play/Pause">‚ñ∂Ô∏è</button>
      <button class="m-btn" id="nextBtn" title="Next">‚è≠Ô∏è</button>
      <button class="m-btn" id="shuffleBtn" title="Shuffle">üîÄ</button>
      <button class="m-btn" id="minBtn" title="Minimize">‚ûñ</button>
    </div>

    <div class="music-row">
      <span class="vol-label">üîä Vol</span>
      <input id="volRange" class="vol-range" type="range" min="0" max="100" value="50">
    </div>

    <div class="music-mini">
      <span class="pill" id="modePill">Mode: Loop</span>
      <span class="pill" id="trackPill">Track: 1/4</span>
    </div>
  </div>

  <script src="assets/js/index.js"></script>

  <!-- ‚úÖ Post Mode Controller (ONLY for article.post.fb) -->
  <script>
    const bfnPost = document.querySelector('article.post.fb');

    function clearPostModes(){
      if(!bfnPost) return;
      bfnPost.classList.remove('is-hidden','coming-soon','disable-images','disable-text');
      // also reset max-height so animation stays clean
      bfnPost.style.maxHeight = '';
    }

    function postNormal(){
      clearPostModes();
    }

    function postComingSoon(){
      clearPostModes();
      bfnPost.classList.add('coming-soon');
    }

    function postToggleHide(){
      if(!bfnPost) return;

      // For smoother max-height animation, measure first
      if(!bfnPost.classList.contains('is-hidden')){
        bfnPost.style.maxHeight = bfnPost.scrollHeight + 'px';
        requestAnimationFrame(() => bfnPost.classList.add('is-hidden'));
      }else{
        bfnPost.classList.remove('is-hidden');
        bfnPost.style.maxHeight = bfnPost.scrollHeight + 'px';
        // then clean after transition
        setTimeout(() => { bfnPost.style.maxHeight = ''; }, 500);
      }
    }

    function postDisableImages(){
      clearPostModes();
      bfnPost.classList.add('disable-images');
    }

    function postDisableText(){
      clearPostModes();
      bfnPost.classList.add('disable-text');
    }

    // ‚úÖ DEFAULT MODE (choose ONE)
    // postComingSoon();      // overlay mode
    // postDisableImages();   // hide images only
    // postDisableText();     // hide text only
    // postToggleHide();      // start hidden
  </script>

</body>
</html>
